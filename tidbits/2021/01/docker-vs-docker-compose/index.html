<!doctype html>
<html lang="en" prefix="og: https://ogp.me/ns#">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="mobile-web-app-capable" content="yes" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="author" content="Wolfram Kriesing">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="picostitch - crafting (and) JavaScript">

    <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@wolframkriesing" />
  <meta name="twitter:title" content="Docker vs. docker-compose" />

  <meta property="og:title" content="Docker vs. docker-compose">
  <meta property="og:type" content="website">
<meta property="og:url" content="https://picostitch.com/tidbits/2021/01/docker-vs-docker-compose/">  <meta property="og:site_name" content="picostitch - crafting (and) JavaScript">

  <script async defer data-domain="picostitch.com" src="https://plausible.io/js/plausible.js"></script>
<link rel="canonical" href="https://picostitch.com/tidbits/2021/01/docker-vs-docker-compose/">  <title>Docker vs. docker-compose | picostitch - crafting (and) JavaScript</title>

  <script async defer type="module" src="https://more-html.github.io/components/src/Heading-loader.js"></script>
  <link rel="stylesheet" href="/tidbits/tidbits.css" type="text/css">
  <meta property="article:type" content="article" />
    <meta property="article:tag" content="docker" />
    <meta property="article:tag" content="docker-compose" />
    <meta property="article:tag" content="tools" />
    <meta property="article:tag" content="containers" />
    <meta property="article:tag" content="project setup" />

  <meta property="og:description" content="After clarifying why [I use Docker for every project I set up](/tidbits/2021/01/why-i-use-docker-for-every-project/)
let me try to clarify also: **Why would I use a docker-compose setup over a single Dockerfile setup?**
I had been doing the single Dockerfile setup for quite a while. 
I was doing a lot of manual work, that made the setup work. But I don&#39;t regret it, it taught me a lot!
But that was not sustainable, and it didn&#39;t scale." />
  <meta property="article:description" content="After clarifying why [I use Docker for every project I set up](/tidbits/2021/01/why-i-use-docker-for-every-project/)
let me try to clarify also: **Why would I use a docker-compose setup over a single Dockerfile setup?**
I had been doing the single Dockerfile setup for quite a while. 
I was doing a lot of manual work, that made the setup work. But I don&#39;t regret it, it taught me a lot!
But that was not sustainable, and it didn&#39;t scale." />
  <meta name="twitter:description" content="After clarifying why [I use Docker for every project I set up](/tidbits/2021/01/why-i-use-docker-for-every-project/)
let me try to clarify also: **Why would I use a docker-compose setup over a single Dockerfile setup?**
I had been doing the single Dockerfile setup for quite a while. 
I was doing a lot of manual work, that made the setup work. But I don&#39;t regret it, it taught me a lot!
But that was not sustainable, and it didn&#39;t scale." />

    <meta property="og:image" content="https://picostitch.com/tidbits/2021/01/docker-compose-preview.jpeg" />
    <meta property="og:image:url" content="https://picostitch.com/tidbits/2021/01/docker-compose-preview.jpeg" />
    <meta name="twitter:image" content="https://picostitch.com/tidbits/2021/01/docker-compose-preview.jpeg" />
</head>
<body class="page-tidbit">

    <header>
    <nav class="primary">
        <ul>
      <li><a href="/">Home üè†</a></li>
      <li><a href="/blog">Blog ‚úçÔ∏è</a></li>
      <li><a href="/tidbits">Tidbits üòã</a></li>
      <li><a href="/projects">Projects üõ†‚Äç‚Äç</a></li>
      <li><a href="/about">About üí°</a></li>
  </ul>

    </nav>

    <div class="sitename">
      <a href="/">picostitch</a>
      <div class="subtitle">
        crafting (and) JavaScript
      </div>
    </div>
  </header>



  <nav class="breadcrumb">
  <a href="/">Home</a> &raquo;
  <a href="/tidbits/">Tidbits</a> &raquo;
  Docker vs. docker-compose
  </nav>

  <main>
    <div class="content">
  <article>

      <img src="../docker-compose-preview.jpeg" style="width: 100%; height: 10rem; object-fit: contain;"/>

    <header>
      <div class="tag" data-tag="docker">#docker</div>
      <h1 id="docker-vs-docker-compose" is="more-h1" show-link-on-mouseover>Docker vs. docker-compose</h1>
      <div class="metadata">
        Wolfram Kriesing - January 8, 2021
            - tagged with:
      <a href="/tag/docker/" class="tag">#docker</a>
      <a href="/tag/docker-compose/" class="tag">#docker-compose</a>
      <a href="/tag/tools/" class="tag">#tools</a>
      <a href="/tag/containers/" class="tag">#containers</a>
      <a href="/tag/project-setup/" class="tag">#project setup</a>

      </div>
    </header>

    <p>After clarifying why <a href="/tidbits/2021/01/why-i-use-docker-for-every-project/">I use Docker for every project I set up</a>
let me try to clarify also: <strong>Why would I use a docker-compose setup over a single Dockerfile setup?</strong>
I had been doing the single Dockerfile setup for quite a while. 
I was doing a lot of manual work, that made the setup work. But I don&#39;t regret it, it taught me a lot!
But that was not sustainable, and it didn&#39;t scale.</p>
<h2 is="more-h2" show-link-on-mouseover id="how-i-automate-every-projects-setup">How I Automate every Projects&#39; Setup</h2>
<p>My setup with one docker container always contained a <a href="https://github.com/wolframkriesing/site-stitcher/blob/76ba1541673a156d5cd944241ea7f29200fffeb5/run.sh"><code>run.sh</code> file</a>,
and a <code>Dockerfile</code>.
The <code>run.sh</code> file grew over time and taught me a lot of bash, but docker-compose does all I need without any bash scripting. 
More about that in a bit. 
The <code>run.sh</code> had the following purposes:</p>
<ol>
<li><strong>start and enter a container</strong> - via <code>./run.sh bash</code> I built, started, entered a container and landed on the command line inside that container</li>
<li><strong>enter a running container</strong> - the above command also detected if a container was already running and just entered it, 
basically opening a second shell inside the container (via <code>docker exec</code>)</li>
<li><strong>build the image on demand</strong> - when I changed the <code>Dockerfile</code> (the definition of the container) docker needs to rebuild
the container, my <code>run.sh</code> did this (more or less well) on demand</li>
<li><strong>configure the docker runtime</strong> - when running a docker container you might need to expose a port (for a web server running inside the container)
or you need to map a folders into the container, so you can work with the files inside the container.
All these things were inside my <code>run.sh</code>.</li>
</ol>
<h2 is="more-h2" show-link-on-mouseover id="docker-compose-ftw">docker-compose ftw</h2>
<p>Long story short: docker-compose does all that. A bit different, maybe not as convinient, but in a standardized and 
consistent way. Additionally docker-compose does it for any number of containers!</p>
<p>For using <code>docker-compose</code> I use <a href="https://github.com/wolframkriesing/site-stitcher/blob/76ba1541673a156d5cd944241ea7f29200fffeb5/docker-compose.yml">this <code>docker-compose.yml</code> file</a>.
All things I configured in my <code>run.sh</code> before are in this file. 
Using <code>docker-compose</code> I do the above like this:</p>
<ol>
<li><strong>start and enter a container</strong> - this needs two commands with <code>docker-compose</code>, 1) <code>docker-compose up -d</code> starts
the container(s) in the background and 2) <code>docker-compose exec &lt;name&gt; bash</code> opens a bash in the container with <code>&lt;name&gt;</code></li>
<li><strong>enter a running container</strong> - just like before, <code>docker-compose exec &lt;name&gt; bash</code> opens a bash in the container with <code>&lt;name&gt;</code>
the <code>&lt;name&gt;</code> is defined in the <code>docker-compose.yml</code> file as the service&#39;s name</li>
<li><strong>build the image on demand</strong> - <code>docker-compose build</code> this builds all docker containers as needed,
<code>docker-compose build --pull</code> will try to find newer docker images, e.g. when you just used the image &quot;node&quot;</li>
<li><strong>configure the docker runtime</strong> - all the configuration of mapping ports or volumes are done in the
<code>docker-compose.yml</code> file, normally located at the root of the project&#39;s directory.</li>
</ol>
<p>In the <a href="https://github.com/wolframkriesing/site-stitcher/tree/5381c9776c265e48d6f903f5019f02d9b64cda6c#develop-run-locally">README.md</a>
I also described how I am using <code>docker-compose</code> for this project.</p>
<h2 is="more-h2" show-link-on-mouseover id="finally">Finally</h2>
<p>I am quite happy with that setup now. Every project works the same.
I am thinking of using the same name &quot;app&quot; for the main container, so I can always do
<code>docker-compose exec app bash</code> to enter the app (or main) container.
This could make it even more unified and easier.
The <a href="https://github.com/wolframkriesing/site-stitcher/blob/76ba1541673a156d5cd944241ea7f29200fffeb5/docker-compose.yml"><code>docker-compose.yml</code> file</a>
I use for this site the container is called &quot;picostitch&quot; right now, which I need
to know. Not as ideal as using &quot;app&quot; every time.</p>

  </article>
    </div>
  </main>

    <footer>
    <div>
      <b>Pages</b>
        <ul>
      <li><a href="/">Home üè†</a></li>
      <li><a href="/blog">Blog ‚úçÔ∏è</a></li>
      <li><a href="/tidbits">Tidbits üòã</a></li>
      <li><a href="/projects">Projects üõ†‚Äç‚Äç</a></li>
      <li><a href="/about">About üí°</a></li>
  </ul>

    </div>

    <div>
      <b>Contact</b>
      <ul>
        <li><a href="https://twitter.com/wolframkriesing" rel="me">Twitter</a></li>
        <li><a href="https://codeberg.com/wolframkriesing" rel="me">Codeberg</a></li>
        <li><a href="https://github.com/wolframkriesing" rel="me">Github</a></li>
        <li><a href="mailto:w+through-picostitch-footer-contact@kriesing.de">Email</a></li>
      </ul>
    </div>
  </footer>

    <nav class="secondary">
    <div class="menu-button">&#9776;</div>
      <ul>
      <li><a href="/">Home üè†</a></li>
      <li><a href="/blog">Blog ‚úçÔ∏è</a></li>
      <li><a href="/tidbits">Tidbits üòã</a></li>
      <li><a href="/projects">Projects üõ†‚Äç‚Äç</a></li>
      <li><a href="/about">About üí°</a></li>
  </ul>

  </nav>

</body>
</html>
