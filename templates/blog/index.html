{% extends "_focus.html" %}

{% block pagename %}blog{% endblock %}
{% block canonicalUrl %}https://picostitch.com/blog{% endblock %}
{% block pageTitlePrefix %}Blog{% endblock %}

{% block head %}
  <link rel="stylesheet" href="/blog/blog.css" type="text/css">
{% endblock %}

{% block breadcrumb %}
  <a href="/">Home</a> &raquo;
  Blog
{% endblock %}

{% import "blog/_parts.html" as blogParts %}

{% block mainStart %}
  <aside class="left">
    <nav class="tags">
      <header>Tags</header>
      <style>
        .tags-all {
          display: none;
        }
        #checkbox-all:checked ~ .tags-all {
          display: block;
        }
        #checkbox-all:checked ~ .tags-top10 {
          display: none;
        }
        /* Hide the checkbox completely, we only use it for setting and remember the value. */
        #checkbox-all {
          display: none;
        }
        label {
          display: flex;
          width: 8rem; /* enough for both elements to nicely have 50% each and be fully readable, dont know how to automtically size this :( */
        }
        label span {
          flex: 1;
          white-space: nowrap;
          text-align: center;
          padding: var(--spacing-smaller);
          margin-bottom: var(--spacing-medium);
        }

        /* The un-checked option. */
        #checkbox-all:not(checked) ~ label .all,
        #checkbox-all:checked ~ label .top10 {
          background: transparent;
          color: var(--color-secondary);
          border-bottom: 1px solid var(--color-highlight-lighter);
        }
        /* The checked option. */
        #checkbox-all:checked ~ label .all,
        #checkbox-all:not(checked) ~ label .top10 {
          background: var(--color-highlight-lighter);
          color: initial;
          border-bottom: 1px solid transparent;
        }
      </style>
      <input type="checkbox" id="checkbox-all"/>
      <label for="checkbox-all">
        <span class="top10">Top 20</span>
        <span class="all">A-Z â†“</span>
      </label>
      <ol class="tags-top10">
        {% for group in groupedBlogPosts.byTag.slice(0, 20) %}
          <li style="background: linear-gradient(to right, var(--color-overlay) {{ group.blogPosts.length }}px, transparent 0)">
            <a href="/blog/tag/{{group.tagSlug}}/">#{{group.tagSlug}}</a>
          </li>
        {% endfor %}
      </ol>
      <ol class="tags-all">
        {% for group in groupedBlogPosts.byTag %}
        <li style="background: linear-gradient(to right, var(--color-overlay) {{ group.blogPosts.length }}px, transparent 0)">
            <a href="/blog/tag/{{group.tagSlug}}/">#{{group.tagSlug}}</a>
          </li>
        {% endfor %}
      </ol>
    </nav>

    {{ blogParts.monthsNav(groupedBlogPosts.byMonth) }}
  </aside>
{% endblock %}

{% block content %}
  <article class="latest">
    <header>
      <h1 id="{{posts[0].slug}}" is="more-h1">
        <a href="{{posts[0].url}}">{{ posts[0].headlineAsHtml | safe }}</a>{{ ' ðŸ“º' if posts[0].hasVideo else '' }}
      </h1>
      <div class="metadata">
        {{ posts[0].dateCreated | toReadableDate }}
        {% if (posts[0].tags.length > 0) %}
          - tagged with: {% for tag in posts[0].tags %}#{{tag.value}} {% endfor %}
        {% endif %}
      </div>
    </header>
    <p class="abstract">
      {{ posts[0].abstractAsHtml | safe }}
    </p>
    <a href="{{posts[0].url}}">Continue reading â†’</a>
  </article>

  {% for post in posts.slice(1) %}
    {{ blogParts.articlePreview(post) }}
  {% endfor %}
{% endblock %}
