@extends(templates/_base.html)

{[ block pagename ]}month{[ endblock ]}
{[ block canonicalUrl ]}/blog/{{yearAndMonth.split('-').join('/')}}/{[ endblock ]}
{[ block pageTitlePrefix ]}{{toReadableDate(yearAndMonth)}}{[ endblock ]}

{[ block breadcrumb ]}
  <a href="/">Home</a> &raquo; Blog &raquo; {{toReadableDate(yearAndMonth)}}
{[ endblock ]}

{[ spread articlePreview ]}
  <article class="preview {{post.isDraft ? 'isDraft' : ''}}" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h2 id="{{post.slug}}" is="more-h2">
        <a href="{{post.url}}" itemprop="url">
        <span itemprop="name headline">{!post.headlineAsHtml!}</span></a>
        {{post.hasVideo ? ' ðŸ“º' : ''}}
        {{post.isDraft ? ' [this is a draft]' : ''}}
      </h2>
      <div class="metadata">
        {{toReadableDate(post.dateCreated)}}
        {% if (post.tags.length > 0) { %}
          - tagged with: {{ post.tags.map(tag => `#${tag}`).join(' ') }}
        {% } %}
      </div>
    </header>
    <div class="content">
      <p class="abstract">{!post.abstractAsHtml!}</p>
    </div>
  </article>
{[ endspread ]}

{[ block content ]}
  <h1 id="{{yearAndMonth}}" is="more-h1">
    {{toReadableDate(yearAndMonth)}}
  </h1>

  {% posts.map(post => { %}
    @spread(articlePreview)
  {% }) %}
{[ endblock ]}
