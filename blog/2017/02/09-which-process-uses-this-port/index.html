<!doctype html>
<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="mobile-web-app-capable" content="yes" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="author" content="Wolfram Kriesing">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="picostitch - crafting (and) JavaScript">

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@wolframkriesing" />
  <meta name="twitter:title" content="Find out which process listens on which port" />

  <meta property="og:title" content="Find out which process listens on which port">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://picostitch.com/blog/2017/02/09-which-process-uses-this-port/">
  <meta property="og:site_name" content="picostitch - crafting (and) JavaScript">

  <link rel="stylesheet" href="/style.css" type="text/css">
  <script async defer data-domain="picostitch.com" src="https://plausible.io/js/plausible.js"></script>
  <script async defer type="module" src="https://more-html.github.io/components/src/Heading-loader.js"></script>
  <link rel="canonical" href="https://picostitch.com/blog/2017/02/09-which-process-uses-this-port/">
  <title>Find out which process listens on which port | picostitch - crafting (and) JavaScript</title>
  
</head>
<body class="page-post">
  <header>
    <nav class="primary">
      <ul>
        
          <li><a href="/">Home üè†</a></li>
        
          <li><a href="/tidbits">Tidbits üòã</a></li>
        
          <li><a href="/projects">Projects üõ†‚Äç‚Äç</a></li>
        
          <li><a href="/about">About üí°</a></li>
        
      </ul>
    </nav>

    <div class="sitename">
      <a href="/">picostitch</a>
      <div class="subtitle">
        crafting (and) JavaScript
      </div>
    </div>
  </header>

  <nav class="breadcrumb">
    
  <a href="/">Home</a> &raquo;
  Blog &raquo;
  <a href="/blog/2017/02/">February 2017</a> &raquo;
  Find out which process listens on which port

  </nav>

  <main>
    <aside>
      <nav class="tags">
        <header>Top Blog Tags</header>
        <ol>
          
          <li><a href="/blog/tag/knowledgebase/">#knowledgebase</a></li>
          
          <li><a href="/blog/tag/javascript/">#javascript</a></li>
          
          <li><a href="/blog/tag/video/">#video</a></li>
          
          <li><a href="/blog/tag/testing/">#testing</a></li>
          
          <li><a href="/blog/tag/oop/">#oop</a></li>
          
          <li><a href="/blog/tag/refactoring/">#refactoring</a></li>
          
          <li><a href="/blog/tag/learning/">#learning</a></li>
          
          <li><a href="/blog/tag/ruby/">#ruby</a></li>
          
          <li><a href="/blog/tag/functional/">#functional</a></li>
          
          <li><a href="/blog/tag/links/">#links</a></li>
          
        </ol>
      </nav>

      <nav class="months">
        <header>Posts by Month</header>
        <ol>
          
          <li><a href="/blog/2020/06/">June 2020</a></li>
          
          <li><a href="/blog/2020/05/">May 2020</a></li>
          
          <li><a href="/blog/2020/04/">April 2020</a></li>
          
          <li><a href="/blog/2020/03/">March 2020</a></li>
          
          <li><a href="/blog/2018/07/">July 2018</a></li>
          
          <li><a href="/blog/2018/05/">May 2018</a></li>
          
          <li><a href="/blog/2017/11/">November 2017</a></li>
          
          <li><a href="/blog/2017/04/">April 2017</a></li>
          
          <li><a href="/blog/2017/03/">March 2017</a></li>
          
          <li><a href="/blog/2017/02/">February 2017</a></li>
          
          <li><a href="/blog/2017/01/">January 2017</a></li>
          
          <li><a href="/blog/2016/06/">June 2016</a></li>
          
          <li><a href="/blog/2016/04/">April 2016</a></li>
          
          <li><a href="/blog/2016/02/">February 2016</a></li>
          
          <li><a href="/blog/2015/12/">December 2015</a></li>
          
          <li><a href="/blog/2015/11/">November 2015</a></li>
          
          <li><a href="/blog/2015/10/">October 2015</a></li>
          
          <li><a href="/blog/2015/05/">May 2015</a></li>
          
          <li><a href="/blog/2015/04/">April 2015</a></li>
          
          <li><a href="/blog/2015/03/">March 2015</a></li>
          
          <li><a href="/blog/2014/03/">March 2014</a></li>
          
          <li><a href="/blog/2014/02/">February 2014</a></li>
          
          <li><a href="/blog/2014/01/">January 2014</a></li>
          
        </ol>
      </nav>
    </aside>
    <div class="content">
      
  <article class="">
    <header>
      <h1 id="which-process-uses-this-port" is="more-h1">
        Find out which process listens on which port
        
      </h1>
      <div class="metadata">
        Wolfram Kriesing
        - February 9, 2017
        
          - tagged with: #command line #linux #tooling #lsof #knowledgebase
        
      </div>
    </header>

    <p>The annoying <code>port 8080 is already in use</code> message and not knowing which
process is occupying this port sucks. I knew it was <code>lsof</code> that can help me.
But how exactly?
TL;DR: <code>ps -p `lsof -i :8080 -t` -o command=</code> (on Mac OSX)</p>
<p>I just wanted to start the react-native app via <code>react-native run-ios</code>.
It didn&#39;t start the first time. Because of my built-in laziness I just ran the command again.
Ran it again, and read the output, just than</p>
<pre><code class="undefinedbash">Port 8080 already in use, packager is either not running or not running correctly</code></pre>
<p>Ah the port is in use, that&#39;s why react-native didn&#39;t come up.
There was this handy linux command <code>lsof</code> (list open files). A simple
web search later and I found a <a href="https://debian-administration.org/article/184/How_to_find_out_which_process_is_listening_upon_a_port">great article on it</a>, which showed the solution <code>lsof -i :8080</code>
where <code>8080</code> is the port.
When you run this you might get something like this:</p>
<pre><code class="undefinedbash">&gt; lsof -i :8080
COMMAND PID USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME
node    178 wk     13u  IPv4 0xaa0005c2e1d30003      0t0  TCP *:http-alt (LISTEN)</code></pre>
<p>This is a nicely formatted table. It first lists <code>node</code> which is the command
that was run and is still running and occupying the port 8080.</p>
<h2 is="more-h2" id="which-program-is-running">Which program is running?</h2>
<p>In order to find out the full command was run the PID (process identifier) will help
us. Fortunately we got it in the line above, see the second column, it&#39;s 28161.
By adding <code>-t</code> to the <code>lsof</code> command we can receive only the process ID.</p>
<pre><code class="undefinedbash">&gt; lsof -i :8080 -t
178</code></pre>
<p>Now we can pass the PID into <code>ps</code> (process status) and we will get all info about
the process running, like so:</p>
<pre><code class="undefinedbash">&gt; ps -p 178
  PID TTY           TIME CMD
  178 ttys006    0:01.00 node /Users/wk/cosmowiki/node_modules/.bin/http-server dist</code></pre>
<p>In the last column we can see the command that was actually run.
So let&#39;s call <code>ps</code> so that it will JUST list the command that is running
and occupying port 8080. We do that by adding <code>-o command</code> which tells
<code>ps</code> to just show the command. This will leave an useless headline above the
command. We can remove it by passing an empty headline, which ps will
ignore, we do that by using the parameter we pass to <code>-o</code> as a key-value
pair and leave the value (the headline) empty. We use <code>-o command=</code>, looks
strange but works :).</p>
<pre><code class="undefinedbash">&gt; ps -p `lsof -i :8080 -t` -o command=
node /Users/wk/cosmowiki/node_modules/.bin/http-server dist</code></pre>
<p>This results in just the command that I had run and which occupies port 8080.</p>
<h2 is="more-h2" id="kill-the-running-process">Kill the running process</h2>
<p>Now I know why and I know what I have to stop, if I want to stop the process
right now, I can call</p>
<pre><code class="undefinedbash">&gt; kill `lsof -i :8080 -t`</code></pre>
<h2 is="more-h2" id="some-words-about-lsof">Some words about lsof</h2>
<p>Just play around with it, and you will see there are many open files, and
on a unix style system most of the things are files, that&#39;s why a line count
of a <code>lsof</code> run will also show you quite a big number of lines.</p>
<pre><code>&gt; lsof | wc -l
14227</code></pre><p>related_tweets:</p>
<blockquote class="twitter-tweet" data-conversation="none" data-cards="hidden" data-partner="tweetdeck"><p lang="en" dir="ltr"><a href="https://twitter.com/wolframkriesing">@wolframkriesing</a> Small nitpick: My Linux ps doesn&#39;t know &quot;-p&quot; - Works on FreeBSD, and so I guess you use OSX :)</p>&mdash; My Own Worst Enemy (@anderiasch) <a href="https://twitter.com/anderiasch/status/834859794892730369">February 23, 2017</a></blockquote>


    
    
  </article>

    </div>
    <aside class="right">
      
  

    </aside>
  </main>

  <footer>
    <div>
      <b>Pages</b><br/>
      <ul>
        
          <li><a href="/">Home üè†</a></li>
        
          <li><a href="/tidbits">Tidbits üòã</a></li>
        
          <li><a href="/projects">Projects üõ†‚Äç‚Äç</a></li>
        
          <li><a href="/about">About üí°</a></li>
        
      </ul>
    </div>
    <div>
      <b>Contact</b><br/>
      <ul>
        <li><a href="https://twitter.com/wolframkriesing">Twitter</a><br/></li>
        <li><a href="mailto:w+through-picostitch-footer-contact@kriesing.de">Email</a><br/></li>
      </ul>
    </div>
    <div></div>
  </footer>

  <nav class="secondary">
    <div class="menu-button">&#9776;</div>
    <ul>
      
        <li><a href="/">Home üè†</a></li>
      
        <li><a href="/tidbits">Tidbits üòã</a></li>
      
        <li><a href="/projects">Projects üõ†‚Äç‚Äç</a></li>
      
        <li><a href="/about">About üí°</a></li>
      
    </ul>
  </nav>
</body>
</html>
